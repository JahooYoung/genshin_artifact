(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[195],{14230:function(t,e,n){var i=n(1702),c=n(84488),o=n(41340),l=/"/g,a=i("".replace);t.exports=function(t,e,n,i){var s=o(c(t)),r="<"+e;return""!==n&&(r+=" "+n+'="'+a(o(i),l,"&quot;")+'"'),r+">"+s+"</"+e+">"}},43429:function(t,e,n){var i=n(47293);t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},78830:function(t,e,n){"use strict";var i=n(82109),c=n(14230),o=n(43429);i({target:"String",proto:!0,forced:o("fontsize")},{fontsize:function(t){return c(this,"font","size",t)}})},24416:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return b}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:"选择同步基准",width:"30%",visible:t.showSyncDialog},on:{"update:visible":function(e){t.showSyncDialog=e},closed:t.handleSyncDialogClosed}},[n("div",[t.localMeta?n("el-button",{on:{click:function(e){return t.selectSyncType("local")}}},[t._v(" 浏览器存储（最后修改于"+t._s(new Date(t.localMeta.lastModified).toLocaleString())+"） ")]):t._e()],1),n("div",[t.fileMeta?n("el-button",{on:{click:function(e){return t.selectSyncType("file")}}},[t._v(" 本地目录存储（最后修改于"+t._s(new Date(t.fileMeta.lastModified).toLocaleString())+"） ")]):t._e()],1)]),n("div",{staticClass:"top-things"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("span",[t._v("账号")])]),n("el-col",{attrs:{span:18}},[n("div",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-sort",disabled:t.syncFile},on:{click:t.handleSync}},[t._v(t._s(t.syncFile?"已":"")+"同步本地目录")])],1)])],1),n("el-divider")],1),n("div",{staticClass:"toolbar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.addAccount}},[t._v(" 添加账号 ")])],1),n("div",{staticClass:"body"},t._l(t.allAccounts,(function(e){var i=e.id,c=e.name;return n("div",{key:i,staticClass:"item is-active",class:{active:i===t.currentAccountId},on:{click:function(e){return t.changeAccount(i)}}},[n("click-edit-label",{staticStyle:{display:"inline-block"},attrs:{value:c,fontsize:"16px",editable:!0},on:{input:function(e){return t.handleChangeName(i,c,e)}}}),n("div",{staticClass:"buttons flex-row"},[n("el-popconfirm",{directives:[{name:"show",rawName:"v-show",value:i!==t.currentAccountId,expression:"id !== currentAccountId"}],attrs:{title:"确定删除？"},on:{confirm:function(e){return t.deleteAccount(i)}}},[n("el-button",{staticClass:"button",attrs:{slot:"reference",icon:"el-icon-delete",type:"text",size:"medium",circle:"",title:"删除"},on:{click:function(t){t.stopPropagation()}},slot:"reference"})],1)],1)],1)})),0)],1)},c=[],o=n(75200),l=n(4367),a=(n(41539),n(21703),n(26294)),s=n(13147),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("input",{style:t.inputStyle,attrs:{disabled:!t.editable},domProps:{value:t.value},on:{click:function(e){t.edit=!0},blur:t.onBlur}}),n("span",{staticClass:"border"})])},u=[],d=(n(78830),{name:"ClickEditLabel",props:{value:{},fontsize:{},editable:{default:!0}},data:function(){return{edit:!1}},methods:{onBlur:function(t){var e=t.target.value;this.edit=!1,this.$emit("input",e)}},computed:{inputStyle:function(){var t,e=null!==(t=this.fontsize)&&void 0!==t?t:"14px",n={fontSize:e};return n}}}),f=d,h=n(1001),p=(0,h.Z)(f,r,u,!1,null,"5263f0a4",null),v=p.exports,m={name:"AccountPage",components:{ClickEditLabel:v},data:function(){return{showSyncDialog:!1,localMeta:null,fileMeta:null,selectSyncType:null,handleSyncDialogClosed:null}},created:function(){this.canCopy=!!navigator.clipboard},computed:(0,l.Z)((0,l.Z)({},(0,a.mapState)(["syncFile"])),(0,a.mapState)("accounts",["currentAccountId","allAccounts"])),methods:{addAccount:function(){this.$store.commit("accounts/addAccount",{name:"新账户"})},deleteAccount:function(t){var e=this.$loading({lock:!0,text:"删除账号中"});this.$store.dispatch("deleteAccount",{id:t}).then((function(){e.close()}))},changeAccount:function(t){if(t!==this.currentAccountId){var e=this.$loading({lock:!0,text:"切换账号中"});this.$store.dispatch("changeAccount",{id:t}).then((function(){e.close()}))}},handleChangeName:function(t,e,n){n!==e&&""!==n&&this.$store.commit("accounts/changeAccountName",{id:t,name:n})},handleSync:function(){var t=this;s.Z.prompt().then((function(e){var n=(0,o.Z)(e,2),i=n[0],c=n[1];return new Promise((function(e,n){if(c)if(i.lastModified!==c.lastModified){t.localMeta=i,t.fileMeta=c;var o=!1;t.selectSyncType=function(n){o=!0,t.showSyncDialog=!1,e(n)},t.handleSyncDialogClosed=function(){o||(s.Z.fileBackend.dirHandle=null,n(Error("user canceled")))},t.showSyncDialog=!0}else e("");else e("local")}))})).then((function(t){return s.Z.sync(t)})).then((function(){return t.$store.dispatch("reload")})).then((function(){t.$store.commit("setSyncFile",!0)}))}}},y=m,g=(0,h.Z)(y,i,c,!1,null,"9362d7d6",null),b=g.exports}}]);