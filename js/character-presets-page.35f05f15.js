"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[7726],{47048:function(e,t,l){var a=l(66252);const n={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},i=(0,a._)("path",{fill:"currentColor",d:"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 104c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"},null,-1),c=[i];function s(e,t){return(0,a.wg)(),(0,a.iD)("svg",n,c)}t["Z"]={name:"fa6-solid-download",render:s}},66760:function(e,t,l){var a=l(66252);const n={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},i=(0,a._)("path",{fill:"currentColor",d:"M288 109.3V352c0 17.7-14.3 32-32 32s-32-14.3-32-32V109.3l-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352h128c0 35.3 28.7 64 64 64s64-28.7 64-64h128c35.3 0 64 28.7 64 64v32c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64v-32c0-35.3 28.7-64 64-64zm368 104c13.3 0 24-10.7 24-24s-10.7-24-24-24s-24 10.7-24 24s10.7 24 24 24z"},null,-1),c=[i];function s(e,t){return(0,a.wg)(),(0,a.iD)("svg",n,c)}t["Z"]={name:"fa6-solid-upload",render:s}},17970:function(e,t,l){l.r(t),l.d(t,{default:function(){return C}});var a=l(39489),n=(l(8438),l(76128)),i=(l(74828),l(77583)),c=(l(79987),l(76810)),s=(l(62029),l(10444),l(33948),l(38862),l(57658),l(74916),l(15306),l(66252)),r=l(2262),o=l(3577),u=l(22201),m=l(65579),f=l(59e3),d=l(83549),v=l(50973),p=l(43363),w=l(64055),g=l(66760),_=l(47048),U=l(9012);const k={class:"toolbar"},S={key:0,class:"body"},h={style:{"font-size":"0.9em",color:"#606266"}};var z=(0,s.aZ)({__name:"CharacterPresetsPage",setup(e){const{t:t}=(0,U.QT)(),l=(0,w.B)(),z=(0,u.tv)(),y=(0,r.iH)(!1),D=(0,r.iH)(null);function C(){y.value=!0}async function b(){if(!D.value)return;const e=await D.value.getReadPromise();let n=null;try{n=JSON.parse(e)}catch(c){n=null}const i=(0,m.mf)(n);if(i){for(let e of n)l.addOrOverwrite(e.name,e.item);y.value=!1}else(0,a.z8)({message:t("presetPage.wrongFormat"),type:"error"})}function Z(e){const t=l.presets.value[e],a=[t],n=JSON.stringify(a);(0,f.Qz)(n,"text/plain",e)}function F(){const e=JSON.stringify(l.allFlat.value);(0,f.Qz)(e,"text/plain",t("misc.preset"))}const x=l.allFlat,H=(0,s.Fl)((()=>x.value.length));function P(e){l.deletePreset(e)}function W(e){console.log("handle",e),z.push({name:"calculate",query:{presetName:e}})}return(e,l)=>{const a=i.mi,u=c.d0,m=i.MO,f=n.GT;return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=e=>y.value=e),title:(0,r.SU)(t)("misc.import"),width:(0,r.SU)(d.B)?"60%":"90%"},{footer:(0,s.w5)((()=>[(0,s.Wm)(a,{onClick:l[0]||(l[0]=e=>y.value=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)((0,r.SU)(t)("misc.cancel")),1)])),_:1}),(0,s.Wm)(a,{type:"primary",onClick:b},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)((0,r.SU)(t)("misc.confirm")),1)])),_:1})])),default:(0,s.w5)((()=>[(0,s.Wm)((0,r.SU)(p.Z),{ref_key:"fileImportBlock",ref:D},null,512)])),_:1},8,["modelValue","title","width"]),(0,s._)("div",k,[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(a,{icon:(0,r.SU)(_.Z),onClick:F},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)((0,r.SU)(t)("presetPage.exportAll")),1)])),_:1},8,["icon"]),(0,s.Wm)(a,{icon:(0,r.SU)(g.Z),onClick:C},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)((0,r.SU)(t)("misc.import")),1)])),_:1},8,["icon"])])),_:1})]),(0,r.SU)(H)>0?((0,s.wg)(),(0,s.iD)("div",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(x),(e=>((0,s.wg)(),(0,s.j4)(v.Z,{item:e.item,name:e.name,"calculate-icon":!1,onDelete:t=>P(e.name),onDownload:t=>Z(e.name),class:"item",onClick:t=>W(e.name)},null,8,["item","name","onDelete","onDownload","onClick"])))),256))])):((0,s.wg)(),(0,s.j4)(f,{key:1},{default:(0,s.w5)((()=>[(0,s._)("p",h,[(0,s.Uk)((0,o.zw)((0,r.SU)(t)("presetPage.go")),1),(0,s._)("span",{class:"route-item",onClick:l[2]||(l[2]=t=>e.$router.replace("/calculate"))},(0,o.zw)((0,r.SU)(t)("misc.calculator")),1),(0,s.Uk)((0,o.zw)((0,r.SU)(t)("presetPage.toCalc")),1)])])),_:1}))])}}}),y=l(83744);const D=(0,y.Z)(z,[["__scopeId","data-v-5db98032"]]);var C=D},50973:function(e,t,l){l.d(t,{Z:function(){return Z}});var a=l(66252),n=l(77583),i=(l(10444),l(3577)),c=l(2262),s=l(49963),r=l(62641),o=l(98505),u=l(53355),m=l(47048),f=l(69167),d=l(9012);const v={class:"item br-3"},p={class:"header"},w={class:"fs-12"},g={key:0,class:"buttons flex-row"},_={class:"body"},U={class:"detail-div fs-12"},k=["src"],S={class:"detail-div fs-12"},h=["src"],z={class:"detail-div fs-12"},y=["src"];var D=(0,a.aZ)({__name:"PresetItem",props:{item:null,name:{default:"name"},toolbar:{type:Boolean,default:!0},calculateIcon:{type:Boolean,default:!0}},setup(e){const t=e,{t:l}=(0,d.QT)(),D=(0,a.Fl)((()=>t.item.character.name)),C=(0,a.Fl)((()=>{const e=r.O[D.value];return e.avatar})),b=((0,a.Fl)((()=>{const e=r.O[D.value];return e.chs})),(0,a.Fl)((()=>o.G[t.item.weapon.name]))),Z=(0,a.Fl)((()=>u.F[t.item.targetFunction.name]));return(r,o)=>{const u=n.mi;return(0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("div",p,[(0,a._)("span",w,(0,i.zw)(t.name),1),e.toolbar?((0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(u,{icon:(0,c.SU)(f.Z),text:"",size:"small",circle:"",onClick:o[0]||(o[0]=(0,s.iM)((e=>r.$emit("delete")),["stop"])),class:"button",title:(0,c.SU)(l)("misc.del")},null,8,["icon","title"]),(0,a.Wm)(u,{icon:(0,c.SU)(m.Z),text:"",size:"small",circle:"",onClick:o[1]||(o[1]=(0,s.iM)((e=>r.$emit("download")),["stop"])),class:"button",title:(0,c.SU)(l)("misc.export")},null,8,["icon","title"])])):(0,a.kq)("",!0)]),(0,a._)("div",_,[(0,a._)("div",U,[(0,a._)("img",{src:(0,c.SU)(C),class:"c-avatar br-50p"},null,8,k),(0,a._)("span",null,(0,i.zw)((0,c.SU)(l)("character",(0,c.SU)(D))),1)]),(0,a._)("div",S,[(0,a._)("img",{src:(0,c.SU)(b).url,class:"w-avatar br-50p"},null,8,h),(0,a._)("span",null,(0,i.zw)((0,c.SU)(l)("weapon",t.item.weapon.name)),1)]),(0,a._)("div",z,[(0,a._)("img",{src:(0,c.SU)(Z).badge,class:"tf-avatar br-50p"},null,8,y),(0,a._)("span",null,(0,i.zw)((0,c.SU)(l)("tfName",(0,c.SU)(Z).name)),1)])])])}}}),C=l(83744);const b=(0,C.Z)(D,[["__scopeId","data-v-2991bd7c"]]);var Z=b},43363:function(e,t,l){l.d(t,{Z:function(){return p}});var a=l(2262),n=l(14181),i=(l(33828),l(66760)),c=l(66252),s=l(3577);const r=e=>((0,c.dD)("data-v-9adc0540"),e=e(),(0,c.Cn)(),e),o={class:"center-div"},u=r((()=>(0,c._)("span",null,"点击，或拖拽上传",-1))),m={key:0,class:"filename"};var f=(0,c.aZ)({__name:"ImportBlock",setup(e,{expose:t}){const l=(0,a.iH)(!1);function r(e){e.preventDefault(),l.value=!0}function f(e){e.preventDefault(),l.value=!1}function d(e){e.preventDefault()}const v=(0,a.iH)(null),p=(0,a.iH)(!1),w=(0,a.iH)(""),g=(0,a.iH)(null);function _(){g.value&&g.value.click()}function U(){if(g.value&&g.value.files){const e=Array.from(g.value.files);e.length>0&&(v.value=e[0],p.value=!0,w.value=e[0].name)}}function k(e){e.preventDefault(),l.value=!1;let t=null;if(e.dataTransfer)if(e.dataTransfer.items){for(let l=0;l<e.dataTransfer.items.length;l++)if("file"===e.dataTransfer.items[l].kind){t=e.dataTransfer.items[l].getAsFile();break}}else t=e.dataTransfer.files[0];v.value=t,t&&(p.value=!0,w.value=t.name)}function S(){return new Promise(((e,t)=>{v.value||t("未选择文件");try{let l=new FileReader;l.onload=t=>{t.target&&e(t.target.result)},l.onerror=e=>{t(e)},l.readAsText(v.value)}catch(l){t(l)}}))}return t({getReadPromise:S}),(e,t)=>{const v=i.Z,S=n.gn;return(0,c.wg)(),(0,c.iD)("div",null,[(0,c._)("div",{class:(0,s.C_)(["root",{over:(0,a.SU)(l)}]),ref:"rootBox",onDragenter:r,onDragleave:f,onDragover:d,onDrop:k,onClick:_},[(0,c._)("div",o,[(0,c.Wm)(S,null,{default:(0,c.w5)((()=>[(0,c.Wm)(v)])),_:1}),u])],34),(0,a.SU)(p)?((0,c.wg)(),(0,c.iD)("p",m,(0,s.zw)((0,a.SU)(w)),1)):(0,c.kq)("",!0),(0,c._)("input",{type:"file",ref_key:"fileInput",ref:g,class:"file-input",onChange:U},null,544)])}}}),d=l(83744);const v=(0,d.Z)(f,[["__scopeId","data-v-9adc0540"]]);var p=v},79987:function(e,t,l){l(3241)},8438:function(e,t,l){l(3241)}}]);