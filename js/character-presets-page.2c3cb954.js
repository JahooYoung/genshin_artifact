"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[726],{24044:function(t,e,a){a.d(e,{Z:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"artifact",class:{selectable:t.selectable,omit:t.item.omit},style:t.artifactStyle,on:{click:t.handleClick}},[a("div",{staticClass:"up"},[t.showBack?a("div",{staticClass:"back",style:{width:100*t.backValue+"%"}}):t._e(),a("span",{staticClass:"name"},[t._v(" "+t._s(t.displayedTitle)+" ")]),t.buttons?a("div",{staticClass:"buttons"},[t.lockButton?a("el-button",{staticClass:"mybutton",attrs:{icon:t.item.omit?"el-icon-unlock":"el-icon-lock",circle:"",size:"mini",type:"text",title:t.item.omit?"启用":"禁用"},on:{click:function(e){return e.stopPropagation(),t.$emit("toggle")}}}):t._e(),t.deleteButton?a("el-button",{staticClass:"mybutton",attrs:{icon:"el-icon-delete",circle:"",size:"mini",type:"text",title:"删除"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete")}}}):t._e(),t.editButton?a("el-button",{staticClass:"mybutton",attrs:{icon:"el-icon-edit",circle:"",size:"mini",type:"text",title:"编辑"},on:{click:function(e){return e.stopPropagation(),t.$emit("edit")}}}):t._e()],1):t._e(),t.extra?a("span",{staticClass:"extra fs-12"},[t._v(t._s(t.extra))]):t._e()]),a("div",{staticClass:"down"},[a("div",[a("img",{staticClass:"myimage",style:{background:t.imageBackground},attrs:{src:t.imageSrc}})]),a("div",{staticClass:"detail-div"},[a("p",{staticClass:"main-tag"},[t._v(t._s(t.mainDisplayTag))]),t._l(t.secTags,(function(e,i){return a("p",{key:i,staticClass:"sec-tag"},[t._v(" "+t._s(e)+" ")])}))],2)])])},r=[],s=a(4222),n=a(36110),l=a(67817),c={name:"ArtifactDisplay",props:{item:{type:Object,default:()=>({setName:"luckyDog",position:"cup",mainTag:{name:"attackPercentage",value:.1},normalTags:[{name:"defendStatic",value:20},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3}],omit:!1})},selectable:{type:Boolean,default:!1},extra:{type:String,default:""},buttons:{default:!1},deleteButton:{default:!1},lockButton:{default:!0},editButton:{default:!1},showBack:{default:!1},backValue:{default:1}},methods:{handleClick(){this.selectable&&this.$emit("click")}},computed:{displayedTitle(){let t=n.oN[this.item.setName];if(!t)throw"no artifact";let e="not exist";return t[this.item.position]&&(e=t[this.item.position].chs,Object.prototype.hasOwnProperty.call(this.item,"level")?e+="+"+this.item.level:e+="+??"),e},displayedStar(){return this.item.star||"??"},imageSrc(){let t=n.oN[this.item.setName];if(!t)throw"no artifact";if(t[this.item.position])return t[this.item.position].url;throw"error no position"},mainDisplayTag(){return(0,s.jH)(this.item.mainTag.name,this.item.mainTag.value)},secTags(){let t=[];for(let e of this.item.normalTags)t.push((0,s.jH)(e.name,e.value));return t},imageBackground(){let t=this.item.star??5;return l.Z[t-1]},artifactStyle(){return{}}}},o=c,u=a(1001),f=(0,u.Z)(o,i,r,!1,null,"489aa8da",null),m=f.exports},98806:function(t,e,a){a.d(e,{Z:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item br-3",on:{click:function(e){return t.$emit("click")}}},[a("div",{staticClass:"header"},[a("span",{staticClass:"fs-12"},[t._v(t._s(t.name))]),t.toolbar?a("div",{staticClass:"buttons flex-row"},[a("el-button",{staticClass:"button",attrs:{icon:"el-icon-delete",type:"text",size:"mini",circle:"",title:"删除"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete")}}}),a("el-button",{staticClass:"button",attrs:{icon:"el-icon-download",type:"text",size:"mini",circle:"",title:"导出"},on:{click:function(e){return e.stopPropagation(),t.$emit("download")}}})],1):t._e()]),a("div",{staticClass:"body"},[a("div",{staticClass:"detail-div fs-12"},[a("img",{staticClass:"c-avatar br-50p",attrs:{src:t.characterAvatar}}),a("span",[t._v(t._s(t.characterChs))])]),a("div",{staticClass:"detail-div fs-12"},[a("img",{staticClass:"w-avatar br-50p",attrs:{src:t.weaponData.url}}),a("span",[t._v(t._s(t.weaponData.chs))])]),a("div",{staticClass:"detail-div fs-12"},[a("img",{staticClass:"tf-avatar br-50p",attrs:{src:t.tfData.badge}}),a("span",[t._v(t._s(t.tfData.chs))])])])])},r=[],s=a(12637),n=a(51775),l=a(43073),c={name:"PresetItem",props:{item:{type:Object,required:!0},name:{},toolbar:{type:Boolean,default:!0}},computed:{characterName(){return this.item.character.name},characterAvatar(){const t=s.O[this.characterName];return t.avatar},characterChs(){const t=s.O[this.characterName];return t.chs},weaponData(){return n.G[this.item.weapon.name]},tfData(){return l.F[this.item.targetFunction.name]}}},o=c,u=a(1001),f=(0,u.Z)(o,i,r,!1,null,"45729ab7",null),m=f.exports},46499:function(t,e,a){a.d(e,{Z:function(){return o}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{ref:"rootBox",staticClass:"root",class:{over:t.isDragOver},on:{dragenter:t.handleDragEnter,dragleave:t.handleDragLeave,dragover:t.handleDragover,drop:t.handleDrop,click:t.handleClick}},[t._m(0)]),t.hasFile?a("p",{staticClass:"filename"},[t._v(t._s(t.fileName))]):t._e(),a("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file"},on:{change:t.handleSelectFile}})])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"center-div"},[a("i",{staticClass:"el-icon-upload"}),a("span",[t._v("点击，或拖拽上传")])])}],s={name:"ImportBlock",mounted(){this.file=null},data(){return{isDragOver:!1,hasFile:!1,fileName:""}},methods:{handleDrop(t){t.preventDefault(),this.isDragOver=!1;let e=null;if(t.dataTransfer.items){for(let a=0;a<t.dataTransfer.items.length;a++)if("file"===t.dataTransfer.items[a].kind){e=t.dataTransfer.items[a].getAsFile();break}}else e=t.dataTransfer.files[0].name;this.file=e,e&&(this.hasFile=!0,this.fileName=e.name)},getReadPromise(){return new Promise(((t,e)=>{this.file||e("未选择文件");try{let a=new FileReader;a.onload=e=>{t(e.target.result)},a.onerror=t=>{e(t)},a.readAsText(this.file)}catch(a){e(a)}}))},handleDragEnter(t){t.preventDefault(),this.isDragOver=!0},handleDragLeave(t){t.preventDefault(),this.isDragOver=!1},handleDragover(t){t.preventDefault()},handleClick(){const t=this.$refs["fileInput"];t&&t.click()},handleSelectFile(t){const e=this.$refs["fileInput"];if(!e)return;const a=Array.from(e.files);a.length>0&&(this.file=a[0],this.hasFile=!0,this.fileName=a[0].name)}}},n=s,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"d75e0f8c",null),o=c.exports},67817:function(t,e){e["Z"]=["rgb(125,127,131)","rgb(108,168,139)","rgb(86,155,175)","rgb(177,135,195)","rgb(211,159,81)"]},80960:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",[a("el-breadcrumb-item",[t._v("计算预设")])],1),a("el-divider"),a("el-dialog",{attrs:{visible:t.showImportDialog,title:"导入",width:"60%"},on:{"update:visible":function(e){t.showImportDialog=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:function(e){t.showImportDialog=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleImport}},[t._v("确定")])]},proxy:!0}])},[a("import-block",{ref:"importBlock"})],1),a("el-drawer",{attrs:{visible:t.showArtifactsScoreDrawer,title:"推荐圣遗物"},on:{"update:visible":function(e){t.showArtifactsScoreDrawer=e}}},[0===t.artifactScoreList.length?a("el-empty"):a("div",{staticClass:"artifact-score-list-div"},t._l(t.artifactsScoreListCut,(function(e,i){return a("div",{key:i},[a("artifact-display",{staticClass:"artifact-score-item",attrs:{item:t.artifactsById[e[0]],"show-back":!0,"back-value":e[1]}})],1)})),0)],1),a("div",{staticClass:"toolbar"},[a("el-button",{attrs:{icon:"el-icon-download",size:"mini"},on:{click:t.handleExportAll}},[t._v("导出全部")]),a("el-button",{attrs:{icon:"el-icon-upload2",size:"mini"},on:{click:t.handleClickImport}},[t._v("导入")])],1),t.presetsLength>0?a("div",{staticClass:"body"},t._l(t.allFlat,(function(e){return a("preset-item",{key:e.name,staticClass:"item",attrs:{item:e.item,name:e.name},on:{delete:function(a){return t.handleDeletePreset(e.name)},download:function(a){return t.handleDownload(e.name)},click:function(a){return t.test(e.name)}}})})),1):[a("el-empty",[a("p",{staticStyle:{"font-size":"0.9em",color:"#606266"}},[t._v(" 请前往"),a("span",{staticClass:"route-item",on:{click:function(e){return t.$router.replace("/calculate")}}},[t._v("计算器")]),t._v("页面添加预设 ")])])]],2)},r=[],s=a(26294),n=a(39285),l=a(76711),c=a(65735),o=a(44368),u=a(98806),f=a(46499),m=a(24044),d={name:"CharacterPresetsPage",components:{PresetItem:u.Z,ImportBlock:f.Z,ArtifactDisplay:m.Z},created(){},data(){return{showImportDialog:!1,showArtifactsScoreDrawer:!1,artifactScoreList:[]}},methods:{checkImportType(t){return Object.prototype.hasOwnProperty.call(t,"data")?"multi":"single"},async handleImport(){const t=this.$refs.importBlock;if(!t)return;const e=await t.getReadPromise();let a=null;try{a=JSON.parse(e)}catch{a=null}const i=(0,n.mf)(a);if(i){for(let t of a)(0,n.y0)(t.item,t.name);this.showImportDialog=!1}else this.$message.error("导入格式错误")},handleDeletePreset(t){(0,n.UK)(t)},handleDownload(t){const e=(0,n.kE)(t),a=[e],i=JSON.stringify(a);(0,l.Qz)(i,"text/plain",t)},handleExportAll(){const t=JSON.stringify(this.allFlat);(0,l.Qz)(t,"text/plain","预设")},handleClickImport(){this.showImportDialog=!0},test(t){console.log(t);const e=(0,n.kE)(t).item;if(!e)return;const a=e.character,i=e.weapon,r=e.targetFunction,s=this.allArtifactsFlat.map((t=>(0,c.Lz)(t)));(0,o.eH)(a,i,r,s).then((t=>{t=t.filter((t=>0===this.artifactsById[t[0]].level)),this.artifactScoreList=t;const e=t.map((t=>t[1])).reduce(((t,e)=>Math.max(t,e)),0);if(console.log(e),e>0)for(let a=0;a<t.length;a++)t[a][1]/=e;this.showArtifactsScoreDrawer=!0}))}},computed:{...(0,s.mapGetters)("presets",["allFlat"]),...(0,s.mapGetters)("artifacts",{allArtifactsFlat:"allFlat",artifactsById:"artifactsById"}),presetsLength(){return this.allFlat.length},artifactsScoreListCut(){return this.artifactScoreList.slice(0,20)}}},h=d,p=a(1001),v=(0,p.Z)(h,i,r,!1,null,"9263a9ac",null),g=v.exports},4222:function(t,e,a){a.d(e,{F_:function(){return o},Lk:function(){return l},MI:function(){return c},jH:function(){return s},ut:function(){return n}});var i=a(98017),r=a(36110);function s(t,e){let a=i.vB[t];if(!a)throw"tag name not exist";let r="";switch(t){case"attackPercentage":case"attackStatic":r="攻击力";break;case"lifePercentage":case"lifeStatic":r="生命值";break;case"defendPercentage":case"defendStatic":r="防御力";break;default:r=a.chs;break}if(a.percentage){let t=(100*e).toFixed(1);return r+"+"+t+"%"}return r+"+"+e}function n(t,e){let a=i.vB[t];if(!a)throw"tag name not exist";return a.percentage?(100*e).toFixed(1):e}function l(t){let e=r.oN[t];return e["flower"]?e["flower"].url:e["head"].url}function c(t,e){let a=parseFloat(e);return i.vB[t].percentage?a/100:a}function o(t,e){return r.oN[t][e].chs}}}]);