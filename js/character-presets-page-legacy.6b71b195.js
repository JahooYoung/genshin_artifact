"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[726],{24044:function(t,e,a){a.d(e,{Z:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"artifact",class:{selectable:t.selectable,omit:t.item.omit},style:t.artifactStyle,on:{click:t.handleClick}},[a("div",{staticClass:"up"},[t.showBack?a("div",{staticClass:"back",style:{width:100*t.backValue+"%"}}):t._e(),a("span",{staticClass:"name"},[t._v(" "+t._s(t.displayedTitle)+" ")]),t.buttons?a("div",{staticClass:"buttons"},[t.lockButton?a("el-button",{staticClass:"mybutton",attrs:{icon:t.item.omit?"el-icon-unlock":"el-icon-lock",circle:"",size:"mini",type:"text",title:t.item.omit?"启用":"禁用"},on:{click:function(e){return e.stopPropagation(),t.$emit("toggle")}}}):t._e(),t.deleteButton?a("el-button",{staticClass:"mybutton",attrs:{icon:"el-icon-delete",circle:"",size:"mini",type:"text",title:"删除"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete")}}}):t._e(),t.editButton?a("el-button",{staticClass:"mybutton",attrs:{icon:"el-icon-edit",circle:"",size:"mini",type:"text",title:"编辑"},on:{click:function(e){return e.stopPropagation(),t.$emit("edit")}}}):t._e()],1):t._e(),t.extra?a("span",{staticClass:"extra fs-12"},[t._v(t._s(t.extra))]):t._e()]),a("div",{staticClass:"down"},[a("div",[a("img",{staticClass:"myimage",style:{background:t.imageBackground},attrs:{src:t.imageSrc}})]),a("div",{staticClass:"detail-div"},[a("p",{staticClass:"main-tag"},[t._v(t._s(t.mainDisplayTag))]),t._l(t.secTags,(function(e,i){return a("p",{key:i,staticClass:"sec-tag"},[t._v(" "+t._s(e)+" ")])}))],2)])])},n=[],r=a(62032),s=(a(68309),a(4222)),c=a(36110),l=a(67817),o={name:"ArtifactDisplay",props:{item:{type:Object,default:function(){return{setName:"luckyDog",position:"cup",mainTag:{name:"attackPercentage",value:.1},normalTags:[{name:"defendStatic",value:20},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3}],omit:!1}}},selectable:{type:Boolean,default:!1},extra:{type:String,default:""},buttons:{default:!1},deleteButton:{default:!1},lockButton:{default:!0},editButton:{default:!1},showBack:{default:!1},backValue:{default:1}},methods:{handleClick:function(){this.selectable&&this.$emit("click")}},computed:{displayedTitle:function(){var t=c.oN[this.item.setName];if(!t)throw"no artifact";var e="not exist";return t[this.item.position]&&(e=t[this.item.position].chs,Object.prototype.hasOwnProperty.call(this.item,"level")?e+="+"+this.item.level:e+="+??"),e},displayedStar:function(){return this.item.star||"??"},imageSrc:function(){var t=c.oN[this.item.setName];if(!t)throw"no artifact";if(t[this.item.position])return t[this.item.position].url;throw"error no position"},mainDisplayTag:function(){return(0,s.jH)(this.item.mainTag.name,this.item.mainTag.value)},secTags:function(){var t,e=[],a=(0,r.Z)(this.item.normalTags);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.push((0,s.jH)(i.name,i.value))}}catch(n){a.e(n)}finally{a.f()}return e},imageBackground:function(){var t,e=null!==(t=this.item.star)&&void 0!==t?t:5;return l.Z[e-1]},artifactStyle:function(){return{}}}},u=o,f=a(1001),d=(0,f.Z)(u,i,n,!1,null,"489aa8da",null),m=d.exports},98806:function(t,e,a){a.d(e,{Z:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item br-3",on:{click:function(e){return t.$emit("click")}}},[a("div",{staticClass:"header"},[a("span",{staticClass:"fs-12"},[t._v(t._s(t.name))]),t.toolbar?a("div",{staticClass:"buttons flex-row"},[a("el-button",{staticClass:"button",attrs:{icon:"el-icon-delete",type:"text",size:"mini",circle:"",title:"删除"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete")}}}),a("el-button",{staticClass:"button",attrs:{icon:"el-icon-download",type:"text",size:"mini",circle:"",title:"导出"},on:{click:function(e){return e.stopPropagation(),t.$emit("download")}}})],1):t._e()]),a("div",{staticClass:"body"},[a("div",{staticClass:"detail-div fs-12"},[a("img",{staticClass:"c-avatar br-50p",attrs:{src:t.characterAvatar}}),a("span",[t._v(t._s(t.characterChs))])]),a("div",{staticClass:"detail-div fs-12"},[a("img",{staticClass:"w-avatar br-50p",attrs:{src:t.weaponData.url}}),a("span",[t._v(t._s(t.weaponData.chs))])]),a("div",{staticClass:"detail-div fs-12"},[a("img",{staticClass:"tf-avatar br-50p",attrs:{src:t.tfData.badge}}),a("span",[t._v(t._s(t.tfData.chs))])])])])},n=[],r=(a(68309),a(12637)),s=a(51775),c=a(43073),l={name:"PresetItem",props:{item:{type:Object,required:!0},name:{},toolbar:{type:Boolean,default:!0}},computed:{characterName:function(){return this.item.character.name},characterAvatar:function(){var t=r.O[this.characterName];return t.avatar},characterChs:function(){var t=r.O[this.characterName];return t.chs},weaponData:function(){return s.G[this.item.weapon.name]},tfData:function(){return c.F[this.item.targetFunction.name]}}},o=l,u=a(1001),f=(0,u.Z)(o,i,n,!1,null,"45729ab7",null),d=f.exports},46499:function(t,e,a){a.d(e,{Z:function(){return o}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{ref:"rootBox",staticClass:"root",class:{over:t.isDragOver},on:{dragenter:t.handleDragEnter,dragleave:t.handleDragLeave,dragover:t.handleDragover,drop:t.handleDrop,click:t.handleClick}},[t._m(0)]),t.hasFile?a("p",{staticClass:"filename"},[t._v(t._s(t.fileName))]):t._e(),a("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file"},on:{change:t.handleSelectFile}})])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"center-div"},[a("i",{staticClass:"el-icon-upload"}),a("span",[t._v("点击，或拖拽上传")])])}],r=(a(68309),a(41539),a(91038),a(78783),{name:"ImportBlock",mounted:function(){this.file=null},data:function(){return{isDragOver:!1,hasFile:!1,fileName:""}},methods:{handleDrop:function(t){t.preventDefault(),this.isDragOver=!1;var e=null;if(t.dataTransfer.items){for(var a=0;a<t.dataTransfer.items.length;a++)if("file"===t.dataTransfer.items[a].kind){e=t.dataTransfer.items[a].getAsFile();break}}else e=t.dataTransfer.files[0].name;this.file=e,e&&(this.hasFile=!0,this.fileName=e.name)},getReadPromise:function(){var t=this;return new Promise((function(e,a){t.file||a("未选择文件");try{var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){a(t)},i.readAsText(t.file)}catch(n){a(n)}}))},handleDragEnter:function(t){t.preventDefault(),this.isDragOver=!0},handleDragLeave:function(t){t.preventDefault(),this.isDragOver=!1},handleDragover:function(t){t.preventDefault()},handleClick:function(){var t=this.$refs["fileInput"];t&&t.click()},handleSelectFile:function(t){var e=this.$refs["fileInput"];if(e){var a=Array.from(e.files);a.length>0&&(this.file=a[0],this.hasFile=!0,this.fileName=a[0].name)}}}}),s=r,c=a(1001),l=(0,c.Z)(s,i,n,!1,null,"d75e0f8c",null),o=l.exports},67817:function(t,e){e["Z"]=["rgb(125,127,131)","rgb(108,168,139)","rgb(86,155,175)","rgb(177,135,195)","rgb(211,159,81)"]},80960:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",[a("el-breadcrumb-item",[t._v("计算预设")])],1),a("el-divider"),a("el-dialog",{attrs:{visible:t.showImportDialog,title:"导入",width:"60%"},on:{"update:visible":function(e){t.showImportDialog=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:function(e){t.showImportDialog=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleImport}},[t._v("确定")])]},proxy:!0}])},[a("import-block",{ref:"importBlock"})],1),a("el-drawer",{attrs:{visible:t.showArtifactsScoreDrawer,title:"推荐圣遗物"},on:{"update:visible":function(e){t.showArtifactsScoreDrawer=e}}},[0===t.artifactScoreList.length?a("el-empty"):a("div",{staticClass:"artifact-score-list-div"},t._l(t.artifactsScoreListCut,(function(e,i){return a("div",{key:i},[a("artifact-display",{staticClass:"artifact-score-item",attrs:{item:t.artifactsById[e[0]],"show-back":!0,"back-value":e[1]}})],1)})),0)],1),a("div",{staticClass:"toolbar"},[a("el-button",{attrs:{icon:"el-icon-download",size:"mini"},on:{click:t.handleExportAll}},[t._v("导出全部")]),a("el-button",{attrs:{icon:"el-icon-upload2",size:"mini"},on:{click:t.handleClickImport}},[t._v("导入")])],1),t.presetsLength>0?a("div",{staticClass:"body"},t._l(t.allFlat,(function(e){return a("preset-item",{key:e.name,staticClass:"item",attrs:{item:e.item,name:e.name},on:{delete:function(a){return t.handleDeletePreset(e.name)},download:function(a){return t.handleDownload(e.name)},click:function(a){return t.test(e.name)}}})})),1):[a("el-empty",[a("p",{staticStyle:{"font-size":"0.9em",color:"#606266"}},[t._v(" 请前往"),a("span",{staticClass:"route-item",on:{click:function(e){return t.$router.replace("/calculate")}}},[t._v("计算器")]),t._v("页面添加预设 ")])])]],2)},n=[],r=a(4367),s=a(62032),c=a(16198),l=(a(35666),a(68309),a(38862),a(21249),a(57327),a(41539),a(47042),a(26294)),o=a(39285),u=a(76711),f=a(65735),d=a(64273),m=a(98806),h=a(46499),p=a(24044),v={name:"CharacterPresetsPage",components:{PresetItem:m.Z,ImportBlock:h.Z,ArtifactDisplay:p.Z},created:function(){},data:function(){return{showImportDialog:!1,showArtifactsScoreDrawer:!1,artifactScoreList:[]}},methods:{checkImportType:function(t){return Object.prototype.hasOwnProperty.call(t,"data")?"multi":"single"},handleImport:function(){var t=this;return(0,c.Z)(regeneratorRuntime.mark((function e(){var a,i,n,r,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$refs.importBlock,a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,a.getReadPromise();case 5:i=e.sent,n=null;try{n=JSON.parse(i)}catch(f){n=null}if(r=(0,o.mf)(n),r){c=(0,s.Z)(n);try{for(c.s();!(l=c.n()).done;)u=l.value,(0,o.y0)(u.item,u.name)}catch(d){c.e(d)}finally{c.f()}t.showImportDialog=!1}else t.$message.error("导入格式错误");case 10:case"end":return e.stop()}}),e)})))()},handleDeletePreset:function(t){(0,o.UK)(t)},handleDownload:function(t){var e=(0,o.kE)(t),a=[e],i=JSON.stringify(a);(0,u.Qz)(i,"text/plain",t)},handleExportAll:function(){var t=JSON.stringify(this.allFlat);(0,u.Qz)(t,"text/plain","预设")},handleClickImport:function(){this.showImportDialog=!0},test:function(t){var e=this;console.log(t);var a=(0,o.kE)(t).item;if(a){var i=a.character,n=a.weapon,r=a.targetFunction,s=this.allArtifactsFlat.map((function(t){return(0,f.Lz)(t)}));(0,d.eH)(i,n,r,s).then((function(t){t=t.filter((function(t){return 0===e.artifactsById[t[0]].level})),e.artifactScoreList=t;var a=t.map((function(t){return t[1]})).reduce((function(t,e){return Math.max(t,e)}),0);if(console.log(a),a>0)for(var i=0;i<t.length;i++)t[i][1]/=a;e.showArtifactsScoreDrawer=!0}))}}},computed:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,l.mapGetters)("presets",["allFlat"])),(0,l.mapGetters)("artifacts",{allArtifactsFlat:"allFlat",artifactsById:"artifactsById"})),{},{presetsLength:function(){return this.allFlat.length},artifactsScoreListCut:function(){return this.artifactScoreList.slice(0,20)}})},g=v,k=a(1001),b=(0,k.Z)(g,i,n,!1,null,"9263a9ac",null),y=b.exports},4222:function(t,e,a){a.d(e,{F_:function(){return o},Lk:function(){return c},MI:function(){return l},jH:function(){return r},ut:function(){return s}});a(56977),a(47042);var i=a(98017),n=a(36110);function r(t,e){var a=i.vB[t];if(!a)throw"tag name not exist";var n="";switch(t){case"attackPercentage":case"attackStatic":n="攻击力";break;case"lifePercentage":case"lifeStatic":n="生命值";break;case"defendPercentage":case"defendStatic":n="防御力";break;default:n=a.chs;break}if(a.percentage){var r=(100*e).toFixed(1);return n+"+"+r+"%"}return n+"+"+e}function s(t,e){var a=i.vB[t];if(!a)throw"tag name not exist";return a.percentage?(100*e).toFixed(1):e}function c(t){var e=n.oN[t];return e["flower"]?e["flower"].url:e["head"].url}function l(t,e){var a=parseFloat(e);return i.vB[t].percentage?a/100:a}function o(t,e){return n.oN[t][e].chs}}}]);