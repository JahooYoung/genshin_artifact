"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[416],{89415:function(t,e,i){i.d(e,{Z:function(){return o}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"button-root",on:{click:function(e){return t.$emit("click")}}},[i("i",{class:[t.icon]})])},r=[],a={name:"MyButton1",props:{icon:{default:"el-icon-delete"}}},c=a,s=i(1001),l=(0,s.Z)(c,n,r,!1,null,"a232d95c",null),o=l.exports},99918:function(t,e,i){i.r(e),i.d(e,{default:function(){return B}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.showSelectArtifactDialog,title:"选择圣遗物",width:"80%"},on:{"update:visible":function(e){t.showSelectArtifactDialog=e}}},[i("select-artifact",{attrs:{position:t.selectArtifactPosition},on:{select:t.handleSelectArtifact}})],1),i("div",{staticClass:"m-toolbar hidden-md-and-up"},[i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[i("span",[i("i",{staticClass:"el-icon-more"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"add"}},[i("i",{staticClass:"el-icon-plus"}),t._v("新建收藏夹")]),i("el-dropdown-item",{attrs:{command:"addKumi"}},[i("i",{staticClass:"el-icon-plus"}),t._v("新建圣遗物组")]),0!==t.currentDirId?i("el-dropdown-item",{attrs:{command:"delete"}},[i("i",{staticClass:"el-icon-delete"}),t._v('删除"'+t._s(t.currentDirTitle)+'"')]):t._e(),0!==t.currentDirId?i("el-dropdown-item",{attrs:{command:"rename"}},[i("i",{staticClass:"el-icon-edit"}),t._v("重命名")]):t._e(),t._l(t.items,(function(e,n){return i("el-dropdown-item",{key:e.index,attrs:{divided:0===n,command:"use "+e.index}},[i("i",{staticClass:"el-icon-menu"}),t._v(t._s(e.title))])}))],2)],1),i("div",{staticClass:"m-middle"},[t._v(" "+t._s(t.currentDirTitle)+" ")])],1),i("div",{staticClass:"pc-container"},[i("div",{staticClass:"left mona-scroll-hidden hidden-sm-and-down"},[i("div",{staticClass:"toolbar"},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleNewDir}},[t._v(" 新建收藏夹 ")])],1),i("div",{staticClass:"mona-scroll-hidden left-list"},[i("my-list",{attrs:{items:t.items},model:{value:t.currentDirId,callback:function(e){t.currentDirId=e},expression:"currentDirId"}})],1)]),i("div",{staticClass:"right mona-scroll-hidden"},[i("div",{staticClass:"hidden-md-and-up"},[i("el-input",{staticStyle:{"margin-bottom":"12px"},attrs:{size:"mini",placeholder:"搜索"},scopedSlots:t._u([{key:"append",fn:function(){return[i("i",{staticClass:"el-icon-search"})]},proxy:!0}]),model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}})],1),i("div",{staticClass:"toolbar2 hidden-sm-and-down"},[i("div",{staticClass:"button-left"},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleNewKumi}},[t._v("新建组")]),i("el-input",{staticStyle:{"margin-left":"16px"},attrs:{size:"mini",placeholder:"搜索"},scopedSlots:t._u([{key:"append",fn:function(){return[i("i",{staticClass:"el-icon-search"})]},proxy:!0}]),model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}})],1),i("div",{staticClass:"button-right"},[0!==t.currentDirId?i("el-button",{attrs:{size:"mini",type:"danger",title:"删除收藏夹"},on:{click:function(e){return t.handleDeleteDir(t.currentDirId)}}},[i("i",{staticClass:"el-icon-delete"})]):t._e(),0!==t.currentDirId?i("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleRenameDir(t.currentDirId)}}},[t._v("重命名")]):t._e()],1)]),i("div",{staticClass:"items mona-scroll-hidden"},[t.filteredKumiList.length>0?i("div",t._l(t.filteredKumiList,(function(e){return i("kumi-item",{key:e.id,attrs:{data:e},on:{delete:function(i){return t.handleDeleteKumi(e.id)},edit:function(i){return t.handleEditKumi(e.id)},click:function(i){return t.handleClickPosition(e.id,i)},deleteArtifact:function(i){return t.handleDeleteArtifact(e.id,i)}}})})),1):i("div",[i("el-empty")],1)])])])],1)},r=[],a=i(62032),c=i(4367),s=(i(74916),i(64765),i(21249),i(23157),i(23123),i(41539),i(26294)),l=i(42246),o=i(81289),u=i.n(o),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",t._l(t.items,(function(e){return i("li",{key:e.index,class:{active:e.index===t.value},on:{click:function(i){return t.$emit("input",e.index)}}},[t._v(" "+t._s(e.title)+" ")])})),0)},m=[],f={name:"MyList",props:["value","items"]},h=f,p=i(1001),v=(0,p.Z)(h,d,m,!1,null,"93c69620",null),y=v.exports,D=i(89415),I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"up"},[i("p",{staticClass:"title"},[t._v(t._s(t.data.title))]),i("div",{staticClass:"buttons"},[i("el-button",{attrs:{type:"text",icon:"el-icon-delete",title:"删除"},on:{click:function(e){return t.$emit("delete")}}}),i("el-button",{attrs:{type:"text",icon:"el-icon-edit",title:"重命名"},on:{click:function(e){return t.$emit("edit")}}})],1)]),i("div",{staticClass:"body"},[t._l(t.positions,(function(e){return[t.artifactBySlot[e]?i("artifact-display",{key:e,staticClass:"artifact-item",attrs:{width:"200px",item:t.artifactBySlot[e],selectable:"",buttons:!0,"lock-button":!1,"delete-button":!0},on:{click:function(i){return t.$emit("click",e)},delete:function(i){return t.$emit("deleteArtifact",t.artifactBySlot[e].id)}}}):i("add-button",{key:e,staticClass:"artifact-item",on:{click:function(i){return t.$emit("click",e)}}})]}))],2)])},k=[],_=i(98017),C=i(96186),g=i(65010),w={name:"KumiItem",components:{AddButton:C.Z,ArtifactDisplay:g.Z},props:["data"],created:function(){this.positions=_.m7},computed:(0,c.Z)((0,c.Z)({},(0,s.mapGetters)("artifacts",["artifactsById"])),{},{artifacts:function(){var t,e=[],i=(0,a.Z)(this.data.artifactIds);try{for(i.s();!(t=i.n()).done;){var n=t.value;Object.prototype.hasOwnProperty.call(this.artifactsById,n)&&e.push(this.artifactsById[n])}}catch(r){i.e(r)}finally{i.f()}return e},artifactBySlot:function(){var t,e={},i=(0,a.Z)(this.artifacts);try{for(i.s();!(t=i.n()).done;){var n=t.value,r=n.position;e[r]=n}}catch(c){i.e(c)}finally{i.f()}return e}})},b=w,S=(0,p.Z)(b,I,k,!1,null,"22701bd6",null),x=S.exports,K=i(24882),A={name:"KumiPage",components:{MyButton1:D.Z,MyList:y,KumiItem:x,SelectArtifact:K.Z},data:function(){return{currentDirId:0,showSelectArtifactDialog:!1,selectArtifactPosition:"flower",underSelectionKumiId:0,searchString:""}},computed:(0,c.Z)((0,c.Z)({},(0,s.mapGetters)("kumi",["directories","kumiByDir"])),{},{items:function(){var t,e=[],i=(0,a.Z)(this.directories);try{for(i.s();!(t=i.n()).done;){var n=t.value;e.push({index:n.id,title:n.title})}}catch(r){i.e(r)}finally{i.f()}return e},currentDirTitle:function(){var t,e=(0,a.Z)(this.directories);try{for(e.s();!(t=e.n()).done;){var i=t.value;if(i.id===this.currentDirId)return i.title}}catch(n){e.e(n)}finally{e.f()}return""},currentKumiList:function(){return(0,l.j8)(this.currentDirId)},fuse:function(){return new(u())(this.currentKumiList,{keys:["title"]})},filteredKumiList:function(){if(""===this.searchString)return this.currentKumiList;var t=this.fuse.search(this.searchString);return t.map((function(t){return t.item}))}}),watch:{"$store.state.accounts.currentAccountId":{handler:function(){this.currentDirId=0},immediate:!1}},methods:{handleCommand:function(t){"add"===t?this.handleNewDir():t.startsWith("use")?this.currentDirId=parseInt(t.split(" ")[1]):"delete"===t?this.handleDeleteDir(this.currentDirId):"rename"===t?this.handleRenameDir(this.currentDirId):"addKumi"===t&&this.handleNewKumi()},handleNewDir:function(){this.getInputDirName("新建","收藏夹名").then((function(t){(0,l.jq)(t)})).catch(this.handleInputResult)},handleDeleteDir:function(t){0!==t&&(0,l.P$)(t)},handleRenameDir:function(t){this.getInputDirName("重命名","新收藏夹名").then((function(e){(0,l.UE)(t,e)})).catch(this.handleInputResult)},handleNewKumi:function(){var t=this;this.getInputKumiName("新建","圣遗物组名").then((function(e){(0,l.Ee)(t.currentDirId,e)})).catch(this.handleInputResult)},handleDeleteKumi:function(t){(0,l.At)(t)},handleEditKumi:function(t){this.getInputKumiName("重命名","新圣遗物组名").then((function(e){(0,l.UE)(t,e)})).catch(this.handleInputResult)},handleSelectArtifact:function(t){this.showSelectArtifactDialog=!1,(0,l.JN)(this.underSelectionKumiId,t)},handleDeleteArtifact:function(t,e){(0,l.fF)(t,e)},handleClickPosition:function(t,e){this.selectArtifactPosition=e,this.showSelectArtifactDialog=!0,this.underSelectionKumiId=t},handleInputResult:function(t){t.error&&this.$message.error(t.reason)},getInputKumiName:function(t,e){var i=this;return new Promise((function(n,r){i.$prompt(null!==e&&void 0!==e?e:"请输入名称",null!==t&&void 0!==t?t:"名称",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var e=t.value,a=(0,l.O5)(i.currentDirId,e);a.error?r({error:!0,reason:a.reason}):n(e)})).catch((function(){r({error:!1,reason:null})}))}))},getInputDirName:function(t,e){var i=this;return new Promise((function(n,r){i.$prompt(null!==e&&void 0!==e?e:"请输入名称",null!==t&&void 0!==t?t:"名称",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var e=t.value,i=(0,l.ym)(e);i.error?r({error:!0,reason:i.reason}):n(e)})).catch((function(){r({error:!1,reason:null})}))}))}}},Z=A,$=(0,p.Z)(Z,n,r,!1,null,"9675ae58",null),B=$.exports}}]);