"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[2121],{94234:function(e,t,l){var a=l(66252);const n={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},i=(0,a._)("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),o=(0,a._)("path",{fill:"currentColor",d:"m469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1),u=[i,o];function s(e,t){return(0,a.wg)(),(0,a.iD)("svg",n,u)}t["Z"]={name:"ep-edit",render:s}},56217:function(e,t,l){var a=l(66252);const n={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},i=(0,a._)("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),o=(0,a._)("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1),u=[i,o];function s(e,t){return(0,a.wg)(),(0,a.iD)("svg",n,u)}t["Z"]={name:"ep-lock",render:s}},53723:function(e,t,l){var a=l(66252);const n={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},i=(0,a._)("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),o=(0,a._)("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm178.304-295.296A192.064 192.064 0 0 0 320 320v64h352l96 38.4V448H256V320a256 256 0 0 1 493.76-95.104l-59.456 23.808z"},null,-1),u=[i,o];function s(e,t){return(0,a.wg)(),(0,a.iD)("svg",n,u)}t["Z"]={name:"ep-unlock",render:s}},1806:function(e,t){t["Z"]=["rgb(125,127,131)","rgb(108,168,139)","rgb(86,155,175)","rgb(177,135,195)","rgb(211,159,81)"]},20820:function(e,t,l){l.d(t,{YK:function(){return n},$o:function(){return o},eH:function(){return u}});l(33948);var a=l(7025);l(60285),l(41637);function n(e,t){const a=new Worker(new URL(l.p+l.u(4901),l.b));return new Promise(((l,n)=>{a.onmessage=function(n){const i=n.data.type;if("ready"===i)a.postMessage({input:e,artifacts:t});else if("result"===i){const e=n.data.data.result;a.terminate(),l(e)}},a.onerror=function(e){n(e)}}))}l(85524);var i=l(80065);function o(e,t,a=12e4){const n=new Worker(new URL(l.p+l.u(8435),l.b)),o=(0,i.p$)(e);return new Promise(((e,l)=>{const i=setTimeout((()=>{l("计算超时")}),a);n.onmessage=l=>{if("ready"===l.data.type)n.postMessage({potentialFunctionInterface:o,artifacts:t});else{const t=l.data.data.results;clearTimeout(i),e(t)}},n.onerror=e=>{l("计算发生错误："+e.message),clearTimeout(i)}})).finally((()=>{n.terminate()}))}async function u(e,t,l,n){const i=await(0,a.n)();return i.CommonInterface.get_artifacts_rank_by_character(e,t,l,n)}},16317:function(e,t,l){l.d(t,{Z:function(){return D}});var a=l(77049),n=(l(75915),l(33948),l(66252)),i=l(3577),o=l(2262),u=l(49963),s=l(81880),r=l(1806),c=l(53723),m=l(56217),d=l(21323),v=l(94234),f=l(21811),p=l(8509);const g={class:"up"},w={class:"name"},h={key:1,class:"buttons"},k={key:2,class:"extra fs-12"},y={class:"down"},_=["src"],b={class:"detail-div"},U={class:"main-tag"};function z(){return{setName:"luckyDog",position:"cup",mainTag:{name:"attackPercentage",value:.1},normalTags:[{name:"defendStatic",value:20},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3}],level:20,star:5,omit:!1}}var S=(0,n.aZ)({__name:"ArtifactDisplay",props:{item:{default:z},selectable:{type:Boolean,default:!1},extra:{default:""},buttons:{type:Boolean,default:!1},deleteButton:{type:Boolean,default:!1},lockButton:{type:Boolean,default:!0},editButton:{type:Boolean,default:!1},showBack:{type:Boolean,default:!1},backValue:{default:1}},emits:["click","toggle","delete","edit"],setup(e,{emit:t}){const l=e,{t:z}=(0,p.QT)(),S=(0,n.Fl)((()=>{let e=s.oN[l.item.setName];if(!e)throw"no artifact";let t="not exist";if(e[l.item.position]){const a=(0,f.VO)(l.item.position);t=z("artifact",e.eng,"items",a),Object.prototype.hasOwnProperty.call(l.item,"level")?t+="+"+l.item.level:t+="+??"}return t})),V=(0,n.Fl)((()=>{let e=s.oN[l.item.setName];if(!e)throw"no artifact";if(e[l.item.position])return e[l.item.position].url;throw"error no position"})),x=(0,n.Fl)((()=>(0,f.jH)(l.item.mainTag.name,l.item.mainTag.value))),D=(0,n.Fl)((()=>{let e=[];for(let t of l.item.normalTags)e.push((0,f.jH)(t.name,t.value));return e})),H=(0,n.Fl)((()=>{let e=l.item.star;return r.Z[e-1]}));function B(){l.selectable&&t("click")}return(e,s)=>{const r=a.mi;return(0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["artifact",{selectable:l.selectable,omit:l.item.omit}]),onClick:B},[(0,n._)("div",g,[l.showBack?((0,n.wg)(),(0,n.iD)("div",{key:0,style:(0,i.j5)({width:100*l.backValue+"%"}),class:"back"},null,4)):(0,n.kq)("",!0),(0,n._)("span",w,(0,i.zw)((0,o.SU)(S)),1),l.buttons?((0,n.wg)(),(0,n.iD)("div",h,[l.lockButton?((0,n.wg)(),(0,n.j4)(r,{key:0,icon:l.item.omit?(0,o.SU)(c.Z):(0,o.SU)(m.Z),circle:"",size:"small",text:"",title:l.item.omit?(0,o.SU)(z)("misc.unlock"):(0,o.SU)(z)("misc.lock"),class:"mybutton",onClick:s[0]||(s[0]=(0,u.iM)((e=>t("toggle")),["stop"]))},null,8,["icon","title"])):(0,n.kq)("",!0),l.deleteButton?((0,n.wg)(),(0,n.j4)(r,{key:1,icon:(0,o.SU)(d.Z),circle:"",size:"small",text:"",title:(0,o.SU)(z)("misc.del"),class:"mybutton",onClick:s[1]||(s[1]=(0,u.iM)((e=>t("delete")),["stop"]))},null,8,["icon","title"])):(0,n.kq)("",!0),l.editButton?((0,n.wg)(),(0,n.j4)(r,{key:2,icon:(0,o.SU)(v.Z),circle:"",size:"small",text:"",title:(0,o.SU)(z)("misc.edit"),class:"mybutton",onClick:s[2]||(s[2]=(0,u.iM)((e=>t("edit")),["stop"]))},null,8,["icon","title"])):(0,n.kq)("",!0)])):(0,n.kq)("",!0),l.extra?((0,n.wg)(),(0,n.iD)("span",k,(0,i.zw)(l.extra),1)):(0,n.kq)("",!0)]),(0,n._)("div",y,[(0,n._)("div",null,[(0,n._)("img",{src:(0,o.SU)(V),alt:"图",class:"myimage",style:(0,i.j5)({background:(0,o.SU)(H)})},null,12,_)]),(0,n._)("div",b,[(0,n._)("p",U,(0,i.zw)((0,o.SU)(x)),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,o.SU)(D),((e,t)=>((0,n.wg)(),(0,n.iD)("p",{key:t,class:"sec-tag"},(0,i.zw)(e),1)))),128))])])],2)}}}),V=l(83744);const x=(0,V.Z)(S,[["__scopeId","data-v-64329ddf"]]);var D=x},11208:function(e,t,l){l.r(t),l.d(t,{default:function(){return Q}});var a=l(79509),n=l(89804),i=l(66252),o=l(35267),u=(l(45177),l(19651)),s=(l(71683),l(31838)),r=(l(87228),l(7810)),c=(l(44163),l(77049)),m=(l(75915),l(21491)),d=(l(72142),l(28785)),v=(l(9638),l(33948),l(2262)),f=l(3577),p=l(26825),g=l(20820),w=l(40195),h=l(81884),k=l(16317),y=l(29491),_=(l(50657),l(60096),l(27554)),b={__name:"SelectPreset",props:{modelValue:String},setup(e){const t=(0,_.B)(),l=(0,i.Fl)((()=>{let e=[];for(let l of t.allFlat.value)e.push(l.name);return e}));return(t,a)=>{const n=y.BT,o=y.km;return(0,i.wg)(),(0,i.j4)(o,{"model-value":e.modelValue,"onUpdate:modelValue":a[0]||(a[0]=e=>t.$emit("update:modelValue",e))},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,v.SU)(l),(e=>((0,i.wg)(),(0,i.j4)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["model-value"])}}};const U=b;var z=U,S=l(64798),V=l(42516),x=l(87523),D=l(7025),H=l(80065),B=l(3024),C=l(69531),Z=l(21323),M=l(10157),j=l(8509);const P=e=>((0,i.dD)("data-v-1dfa689f"),e=e(),(0,i.Cn)(),e),T={key:1,style:{padding:"0 20px"}},W={style:{"margin-bottom":"12px"}},F={style:{display:"flex","justify-content":"space-between","align-items":"center"},class:"member-header"},Y={class:"team-title"},A={class:"common-title2"},q={class:"common-title2"},I={class:"result-item-top"},K=P((()=>(0,i._)("div",{class:"result-item-buttons"},null,-1))),L={class:"result-item-content"},N={key:1,style:{display:"flex","justify-content":"center"}};var R=(0,i.aZ)({__name:"TeamOptimizationPage",async setup(e){let t,l;const{t:y}=(0,j.QT)(),b=(0,V.n)(),U=(0,_.B)(),P=(0,x.c7)(),R=([t,l]=(0,i.mv)((()=>(0,D.n)())),t=await t,l(),t),O=(0,v.iH)([null]),$=(0,v.iH)([0]),Q=8;function G(){O.value.length!==Q?(O.value.push(null),$.value.push(0)):(0,a.z8)({message:"最多支持8个成员",type:"error"})}function E(e){1!==O.value.length&&(O.value.splice(e,1),$.value.splice(e,1))}const J=(0,i.Fl)((()=>{let e=[];for(let t of O.value.values())if(t){const l=U.presets.value[t];l&&e.push(l)}return e})),X=(0,v.iH)([]),ee=(0,v.iH)(0),te=(0,i.Fl)((()=>0===X.value.length?null:X.value[ee.value]));function le(e){ee.value=e-1}const ae=(0,v.iH)(!1),ne=(0,v.iH)(null);function ie(e){let t=[];if(te.value){const l=Object.values(te.value[e]),a=[];for(let e of l){const t=b.artifacts.value.get(e);t&&a.push(t)}t=a.map((e=>(0,p.Lz)(e)))}return{character:J.value[e].item.character,weapon:J.value[e].item.weapon,buffs:J.value[e].item.buffs,artifacts:t}}async function oe(e){const t=ie(e);ne.value=await R.CommonInterface.get_attribute(t),ae.value=!0}function ue(e){b.toggleArtifact(e)}const se=(0,i.Fl)((()=>{let e=[];for(let t of b.artifacts.value.values())t.level>=16&&!t.omit&&e.push(t);return e})),re=(0,i.Fl)((()=>se.value.map(p.Lz))),ce=(0,i.Fl)((()=>J.value.map((e=>(0,w.DR)(e.item))))),me={mva_step:5,work_space:1e3,max_re_optimize:5,max_search:1e6,count:1e3},de=(0,i.Fl)((()=>({single_interfaces:ce.value,weights:$.value,hyper_param:me})));function ve(){const e=J.value.length===O.value.length;if(!e)return void(0,a.z8)({message:"请选择计算预设",type:"error"});const t=(0,H.p$)(de.value),l=re.value,i=n.kN.service({text:"莫娜占卜中（可能需要数分钟）",lock:!0,fullscreen:!0});(0,g.YK)(t,l).then((e=>{X.value=e.artifacts,ee.value=0})).catch((e=>{var t;(0,a.z8)({message:`计算过程发生错误：${null!==(t=e.message)&&void 0!==t?t:e}`,type:"error"}),console.error(e)})).finally((()=>{i.close()}))}return(0,i.YP)((()=>P.currentAccountId.value),(()=>{O.value=[null],$.value=[0],X.value=[],ee.value=0})),(e,t)=>{const l=d.GT,a=m.zd,n=c.mi,p=r.BM,g=s.Dv,w=u.d6,_=o.dq;return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(a,{title:(0,v.SU)(y)("misc.panel"),modelValue:ae.value,"onUpdate:modelValue":t[0]||(t[0]=e=>ae.value=e),size:(0,v.SU)(h.B)?"30%":"100%"},{default:(0,i.w5)((()=>[ne.value?((0,i.wg)(),(0,i.iD)("div",T,[(0,i.Wm)((0,v.SU)(S.Z),{attribute:ne.value},null,8,["attribute"])])):((0,i.wg)(),(0,i.j4)(l,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)("In theory, you should not see this")])),_:1}))])),_:1},8,["title","modelValue","size"]),(0,i.Wm)(_,{gutter:16},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{md:6,sm:24,class:"mona-scroll-hidden left"},{default:(0,i.w5)((()=>[(0,i._)("div",W,[(0,i.Wm)(n,{type:"primary",icon:(0,v.SU)(B.Z),onClick:ve},{default:(0,i.w5)((()=>[(0,i.Uk)((0,f.zw)((0,v.SU)(y)("teamPage.start")),1)])),_:1},8,["icon"]),(0,i.Wm)(n,{icon:(0,v.SU)(C.Z),onClick:G},{default:(0,i.w5)((()=>[(0,i.Uk)((0,f.zw)((0,v.SU)(y)("teamPage.add")),1)])),_:1},8,["icon"])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(O.value,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"member-item"},[(0,i._)("div",F,[(0,i._)("p",Y,(0,f.zw)((0,v.SU)(y)("teamPage.member"))+(0,f.zw)(t+1),1),(0,i._)("div",null,[(0,i.Wm)(n,{circle:"",text:"",icon:(0,v.SU)(Z.Z),onClick:e=>E(t),style:{color:"white"}},null,8,["icon","onClick"])])]),(0,i._)("p",A,(0,f.zw)((0,v.SU)(y)("misc.preset")),1),(0,i.Wm)(z,{modelValue:O.value[t],"onUpdate:modelValue":e=>O.value[t]=e},null,8,["modelValue","onUpdate:modelValue"]),(0,i._)("p",q,(0,f.zw)((0,v.SU)(y)("teamPage.weight")),1),(0,i.Wm)(p,{modelValue:$.value[t],"onUpdate:modelValue":e=>$.value[t]=e,min:0,max:1,step:.01,"show-input":!0,style:{"padding-left":"8px"}},null,8,["modelValue","onUpdate:modelValue","step"])])))),128))])),_:1}),(0,i.Wm)(g,{md:18,sm:24,class:"mona-scroll-hidden right"},{default:(0,i.w5)((()=>[(0,v.SU)(te)?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Wm)(w,{"model-value":ee.value+1,"onUpdate:modelValue":le,min:1,max:X.value.length,style:{"margin-bottom":"12px"}},null,8,["model-value","max"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,v.SU)(te),((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"result-item"},[(0,i._)("div",I,[(0,i._)("div",null,[(0,i.Wm)(n,{icon:(0,v.SU)(M.Z),circle:"",text:"",title:(0,v.SU)(y)("teamPage.showStat"),onClick:e=>oe(t)},null,8,["icon","title","onClick"])]),K]),(0,i._)("div",L,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,v.SU)(te)[t],(e=>((0,i.wg)(),(0,i.j4)(k.Z,{key:e,item:(0,v.SU)(b).artifacts.value.get(e),buttons:!0,"lock-button":!0,"delete-button":!1,"edit-button":!1,onToggle:t=>ue(e)},null,8,["item","onToggle"])))),128))])])))),128))],64)):((0,i.wg)(),(0,i.iD)("div",N,[(0,i.Wm)(l)]))])),_:1})])),_:1})])}}}),O=l(83744);const $=(0,O.Z)(R,[["__scopeId","data-v-1dfa689f"]]);var Q=$}}]);