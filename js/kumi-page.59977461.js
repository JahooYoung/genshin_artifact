"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[7416],{75106:function(e,t,l){var i=l(66252);const n={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},a=(0,i._)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192H128zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32z"},null,-1),u=[a];function o(e,t){return(0,i.wg)(),(0,i.iD)("svg",n,u)}t["Z"]={name:"ep-folder",render:o}},51582:function(e,t,l){var i=l(66252);const n={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},a=(0,i._)("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224a112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96a48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224a112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96a48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224a112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96a48 48 0 0 0 0-96z"},null,-1),u=[a];function o(e,t){return(0,i.wg)(),(0,i.iD)("svg",n,u)}t["Z"]={name:"ep-more",render:o}},31133:function(e,t,l){var i=l(66252);const n={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},a=(0,i._)("path",{fill:"currentColor",d:"m795.904 750.72l124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704a352 352 0 0 0 0 704z"},null,-1),u=[a];function o(e,t){return(0,i.wg)(),(0,i.iD)("svg",n,u)}t["Z"]={name:"ep-search",render:o}},6552:function(e,t,l){l.d(t,{F:function(){return m}});var i=l(2262),n=l(66252),a=(l(33948),l(2707),l(38862),l(23746)),u=l(42516),o=l(21811);const c=(0,u.n)();function d(){let e={0:{id:0,title:"默认收藏夹",dir:!0,children:[]}};const t=localStorage.getItem("kumi2");if(t)try{const l=JSON.parse(t);if("object"!==typeof l)return l;e=l.kumi?l.kumi:l}catch(i){console.error(i)}let l=[...Object.values(e)];return l.sort(((e,t)=>e.id-t.id)),l}function r(){const e=(0,i.iH)(d()),t=(0,i.iH)(new Map),l=new a.C;for(let i of e.value)t.value.set(i.id,i);const u=(0,n.Fl)((()=>{const t=[];for(let l of e.value)l.dir&&t.push(l);return t}));function r(i){let n={id:l.generateId(),title:i,dir:!0,children:[]};return e.value.push(n),t.value.set(n.id,n),n.id}function s(l){const i=t.value.get(l);if(i&&i.dir){var n;let a=null!==(n=i.children)&&void 0!==n?n:[],u=new Set(a);u.add(l);let o=0;while(o<e.value.length){const l=e.value[o];u.has(l.id)?(e.value.splice(o,1),t.value.delete(l.id)):o+=1}}}function m(e,l){const i=t.value.get(e);i&&(i.title=l)}const v=(0,n.Fl)((()=>{let l={};for(let n of e.value){var i;if(n.dir)if(l[n.id]=null!==(i=l[n.id])&&void 0!==i?i:[],n.children)for(let e of n.children)l[n.id].push(t.value.get(e))}return l}));function f(i,n){let a=t.value.get(i);if(a){let i={id:l.generateId(),title:n,dir:!1,artifactIds:[null,null,null,null,null]};return e.value.push(i),t.value.set(i.id,i),a.children&&a.children.push(i.id),i.id}return null}function p(l){t.value.delete(l);const i=e.value.findIndex((e=>e.id===l));i>0&&e.value.splice(i,1);for(const t of e.value)if(t.dir&&t.children){const e=t.children.indexOf(l);if(-1!==e){t.children.splice(e,1);break}}}function h(e,l){let i=t.value.get(e);if(i){var n;i.artifactIds=null!==(n=i.artifactIds)&&void 0!==n?n:[null,null,null,null,null];let e=c.artifacts.value.get(l);if(e){const t=e.position,n=(0,o.VO)(t);i.artifactIds[n]=l}}}function w(e,l){let i=t.value.get(e);if(i){var n;i.artifactIds=null!==(n=i.artifactIds)&&void 0!==n?n:[null,null,null,null,null];let e=c.artifacts.value.get(l);if(e){const t=e.position,l=(0,o.VO)(t);i.artifactIds[l]=null}}}function g(e){return t.value.get(e)}return{kumi:e,kumiById:t,dirs:u,kumisByDirId:v,itemById:g,createDir:r,deleteDir:s,rename:m,createKumi:f,deleteKumi:p,addArtifact:h,deleteArtifact:w}}const s=r();function m(){return s}(0,n.YP)((()=>s.kumi.value),(e=>{localStorage.setItem("kumi2",JSON.stringify(e))}),{deep:!0})},90489:function(e,t,l){l.r(t),l.d(t,{default:function(){return ce}});var i=l(2262),n=l(66252),a=l(50592),u=(l(59674),l(28785)),o=(l(9638),l(77049)),c=(l(7739),l(86660)),d=(l(28475),l(90653)),r=(l(96152),l(31133)),s=l(59462),m=(l(98151),l(76398),l(33466),l(75915),l(8350)),v=(l(12573),l(33948),l(74916),l(3577)),f=l(74221);const p=["onClick"];function h(e,t,l,i,a,u){return(0,n.wg)(),(0,n.iD)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.items,(t=>((0,n.wg)(),(0,n.iD)("li",{key:t.index,class:(0,v.C_)({active:t.index===l.modelValue}),onClick:l=>e.$emit("update:modelValue",t.index)},(0,v.zw)(t.title),11,p)))),128))])}var w={name:"MyList",props:["modelValue","items"],emits:["update:modelValue"]},g=l(83744);const k=(0,g.Z)(w,[["render",h],["__scopeId","data-v-ce1acaf2"]]);var U=k,_=l(75701),S=l(17212),x=l(16317),y=l(42516),D=l(21323),z=l(94234);const Z={class:"up"},V={class:"title"},C={class:"buttons"},I={class:"body"};var H=(0,n.aZ)({__name:"KumiItem",props:{data:null},emits:["click","deleteArtifact","delete","edit"],setup(e,{emit:t}){const l=e,a=(0,y.n)(),u=(0,n.Fl)((()=>{let e=[];const t={};for(let n of null!==(i=l.data.artifactIds)&&void 0!==i?i:[]){var i;if(n){const e=a.artifacts.value.get(n);e&&(t[e.position]=e)}}for(let l=0;l<5;l++){const i=t[_.m7[l]];i?e.push(i):e.push(null)}return e}));return(e,a)=>{const c=o.mi;return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Z,[(0,n._)("p",V,(0,v.zw)(l.data.title),1),(0,n._)("div",C,[(0,n.Wm)(c,{text:"",icon:(0,i.SU)(D.Z),title:"删除",onClick:a[0]||(a[0]=e=>t("delete")),circle:""},null,8,["icon"]),(0,n.Wm)(c,{text:"",icon:(0,i.SU)(z.Z),title:"重命名",onClick:a[1]||(a[1]=e=>t("edit")),circle:""},null,8,["icon"])])]),(0,n._)("div",I,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(u),((e,l)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:l},[e?((0,n.wg)(),(0,n.j4)((0,i.SU)(x.Z),{key:0,class:"artifact-item",width:"200px",item:e,selectable:"",onClick:l=>t("click",e.position),onDelete:l=>t("deleteArtifact",e.id),buttons:!0,"lock-button":!1,"delete-button":!0},null,8,["item","onClick","onDelete"])):((0,n.wg)(),(0,n.j4)((0,i.SU)(S.Z),{key:1,class:"artifact-item",onClick:e=>t("click",(0,i.SU)(_.m7)[l])},null,8,["onClick"]))],64)))),128))])])}}});const W=(0,g.Z)(H,[["__scopeId","data-v-3b630bd6"]]);var b=W,K=l(37445),B=l(6552),F=l(81884),P=l(69531),M=l(51582),T=l(75106);const A={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Y=(0,n._)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192H128zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32zm384 416V416h64v128h128v64H544v128h-64V608H352v-64h128z"},null,-1),j=[Y];function O(e,t){return(0,n.wg)(),(0,n.iD)("svg",A,j)}var q={name:"ep-folder-add",render:O},L=l(8509);const R={class:"m-toolbar hidden-md-and-up"},E={class:"m-middle"},J={class:"pc-container"},N={class:"left mona-scroll-hidden hidden-sm-and-down"},G={class:"toolbar"},Q={class:"mona-scroll-hidden left-list"},$={class:"right mona-scroll-hidden"},X={class:"hidden-md-and-up"},ee={class:"toolbar2 hidden-sm-and-down"},te={class:"button-left"},le={class:"button-right"},ie={class:"items mona-scroll-hidden"},ne={key:0},ae={key:1};var ue=(0,n.aZ)({__name:"KumiPage",setup(e){const t=(0,B.F)(),{t:l}=(0,L.QT)(),p=(0,i.iH)(0),h=(0,n.Fl)((()=>{let e=[];for(let l of t.dirs.value)e.push({index:l.id,title:l.title});return e})),w=(0,n.Fl)((()=>{const e=t.itemById(p.value);return e?e.title:"title"}));function g(){a.T.prompt(l("kumiPage.enterFolder"),l("kumiPage.newFolder"),{confirmButtonText:l("misc.confirm"),cancelButtonText:l("misc.cancel")}).then((({value:e})=>{e&&t.createDir(e)})).catch((()=>{}))}function k(e){0!==e&&(t.deleteDir(e),p.value=0)}function _(e){a.T.prompt(l("kumiPage.enterFolder"),l("kumiPage.renameFolder"),{confirmButtonText:l("misc.confirm"),cancelButtonText:l("misc.cancel")}).then((({value:l})=>{l&&t.rename(e,l)})).catch((()=>{}))}const S=(0,n.Fl)((()=>t.kumisByDirId.value[p.value]));function x(){a.T.prompt(l("kumiPage.enterKumi"),l("kumiPage.newKumi"),{confirmButtonText:l("misc.confirm"),cancelButtonText:l("misc.cancel")}).then((({value:e})=>{e&&t.createKumi(p.value,e)})).catch((()=>{}))}function y(e){t.deleteKumi(e)}function Z(e){a.T.prompt(l("kumiPage.enterKumi"),l("kumiPage.renameKumi"),{confirmButtonText:l("misc.confirm"),cancelButtonText:l("misc.cancel")}).then((({value:l})=>{l&&t.rename(e,l)})).catch((()=>{}))}const V=(0,i.iH)(""),C=(0,n.Fl)((()=>new f.Z(S.value,{keys:["title"]}))),I=(0,n.Fl)((()=>{if(""===V.value)return S.value;const e=C.value.search(V.value);return e.map((e=>e.item))})),H=(0,i.iH)(!1),W=(0,i.iH)("flower"),A=(0,i.iH)(0);function Y(e){H.value=!1,t.addArtifact(A.value,e)}function j(e,l){t.deleteArtifact(e,l)}function O(e,t){W.value=t,H.value=!0,A.value=e}function ue(e){"add"===e?g():e.startsWith("use")?p.value=parseInt(e.split(" ")[1]):"delete"===e?k(p.value):"rename"===e?_(p.value):"addKumi"===e&&x()}return(e,t)=>{const a=m.d0,f=o.mi,S=s.Df,C=s.o2,B=s.YK,A=r.Z,L=d.EZ,oe=c.gn,ce=o.MO,de=u.GT;return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(a,{modelValue:H.value,"onUpdate:modelValue":t[0]||(t[0]=e=>H.value=e),title:(0,i.SU)(l)("kumiPage.selectArt"),width:(0,i.SU)(F.B)?"80%":"90%"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,i.SU)(K.Z),{position:W.value,onSelect:Y},null,8,["position"])])),_:1},8,["modelValue","title","width"]),(0,n._)("div",R,[(0,n.Wm)(B,{trigger:"click",onCommand:ue},{dropdown:(0,n.w5)((()=>[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(S,{command:"add",icon:(0,i.SU)(q)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)((0,i.SU)(l)("kumiPage.newFolder")),1)])),_:1},8,["icon"]),(0,n.Wm)(S,{command:"addKumi",icon:(0,i.SU)(P.Z)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)((0,i.SU)(l)("kumiPage.newKumi")),1)])),_:1},8,["icon"]),0!==p.value?((0,n.wg)(),(0,n.j4)(S,{key:0,command:"delete",icon:(0,i.SU)(D.Z)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)((0,i.SU)(l)("misc.del"))+'"'+(0,v.zw)((0,i.SU)(w))+'"',1)])),_:1},8,["icon"])):(0,n.kq)("",!0),0!==p.value?((0,n.wg)(),(0,n.j4)(S,{key:1,command:"rename",icon:(0,i.SU)(z.Z)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)((0,i.SU)(l)("misc.rename")),1)])),_:1},8,["icon"])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(h),((e,t)=>((0,n.wg)(),(0,n.j4)(S,{key:e.index,divided:0===t,command:"use "+e.index,icon:(0,i.SU)(T.Z)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.title),1)])),_:2},1032,["divided","command","icon"])))),128))])),_:1})])),default:(0,n.w5)((()=>[(0,n.Wm)(f,{icon:(0,i.SU)(M.Z),size:"small",text:"",circle:""},null,8,["icon"])])),_:1}),(0,n._)("div",E,(0,v.zw)((0,i.SU)(w)),1)]),(0,n._)("div",J,[(0,n._)("div",N,[(0,n._)("div",G,[(0,n.Wm)(f,{type:"primary",icon:(0,i.SU)(P.Z),onClick:g},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)((0,i.SU)(l)("kumiPage.newFolder")),1)])),_:1},8,["icon"])]),(0,n._)("div",Q,[(0,n.Wm)((0,i.SU)(U),{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),items:(0,i.SU)(h)},null,8,["modelValue","items"])])]),(0,n._)("div",$,[(0,n._)("div",X,[(0,n.Wm)(L,{modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=e=>V.value=e),style:{"margin-bottom":"12px"},placeholder:(0,i.SU)(l)("misc.search")},{append:(0,n.w5)((()=>[(0,n.Wm)(A)])),_:1},8,["modelValue","placeholder"])]),(0,n._)("div",ee,[(0,n._)("div",te,[(0,n.Wm)(f,{type:"primary",icon:(0,i.SU)(P.Z),onClick:x},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)((0,i.SU)(l)("kumiPage.newKumi")),1)])),_:1},8,["icon"]),(0,n.Wm)(L,{modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=e=>V.value=e),style:{"margin-left":"16px"},placeholder:(0,i.SU)(l)("misc.search")},{append:(0,n.w5)((()=>[(0,n.Wm)(oe,null,{default:(0,n.w5)((()=>[(0,n.Wm)(A)])),_:1})])),_:1},8,["modelValue","placeholder"])]),(0,n._)("div",le,[(0,n.Wm)(ce,null,{default:(0,n.w5)((()=>[0!==p.value?((0,n.wg)(),(0,n.j4)(f,{key:0,icon:(0,i.SU)(z.Z),onClick:t[4]||(t[4]=e=>_(p.value))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)((0,i.SU)(l)("misc.rename")),1)])),_:1},8,["icon"])):(0,n.kq)("",!0),0!==p.value?((0,n.wg)(),(0,n.j4)(f,{key:1,type:"danger",onClick:t[5]||(t[5]=e=>k(p.value)),title:(0,i.SU)(l)("kumiPage.deleteFolder"),icon:(0,i.SU)(D.Z)},null,8,["title","icon"])):(0,n.kq)("",!0)])),_:1})])]),(0,n._)("div",ie,[(0,i.SU)(I).length>0?((0,n.wg)(),(0,n.iD)("div",ne,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(I),(e=>((0,n.wg)(),(0,n.j4)((0,i.SU)(b),{key:e.id,data:e,onDelete:t=>y(e.id),onEdit:t=>Z(e.id),onClick:t=>O(e.id,t),onDeleteArtifact:t=>j(e.id,t)},null,8,["data","onDelete","onEdit","onClick","onDeleteArtifact"])))),128))])):((0,n.wg)(),(0,n.iD)("div",ae,[(0,n.Wm)(de)]))])])])])}}});const oe=(0,g.Z)(ue,[["__scopeId","data-v-3fff4ea7"]]);var ce=oe},96152:function(e,t,l){l(93979)}}]);