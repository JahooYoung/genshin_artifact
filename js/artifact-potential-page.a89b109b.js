"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[57],{60630:function(t,e,a){a.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.value,size:"small",multiple:t.multiple},on:{input:function(e){return t.$emit("input",e)}}},[t.includeAny?a("el-option",{attrs:{label:"任意",value:"any"}}):t._e(),t._l(t.tagList,(function(t){return a("el-option",{key:t.name,attrs:{label:t.title,value:t.name}})}))],2)},l=[],n=a(98017),s={name:"SelectArtifactMainStat",props:{value:{},includeAny:{default:!0},multiple:{default:!1},position:{default:null}},computed:{tagList(){let t=[];if(this.position)for(let e of n.nl[this.position])t.push({name:e,title:n.vB[e].chs});else for(let e in n.vB)t.push({name:e,title:n.vB[e].chs});return t}}},r=s,o=a(1001),c=(0,o.Z)(r,i,l,!1,null,null,null),u=c.exports},93972:function(t,e,a){a.d(e,{Z:function(){return p}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.value,disabled:t.disabled,size:"small",multiple:t.multiple,"multiple-limit":t.multipleLimit},on:{input:function(e){return t.$emit("input",e)}}},[t.anyOption?a("el-option",{attrs:{label:"任意",value:"any"}}):t._e(),t._l(t.allArtifactsName,(function(e){return a("el-option",{key:e.name,attrs:{label:e.chs,value:e.name}},[a("div",{staticClass:"item"},[a("img",{staticClass:"tn",attrs:{src:e.url}}),a("span",[t._v(t._s(e.chs))])])])}))],2)},l=[],n=a(36110),s=a(4222);let r=Object.values(n.oN);r.sort(((t,e)=>e.maxStar-t.maxStar));let o=r.map((t=>({name:t.eng,chs:t.chs,url:(0,s.Lk)(t.eng)})));var c={name:"SelectArtifactSet",created:function(){this.allArtifactsName=o},props:{value:{type:String,required:!0},disabled:{type:Boolean,default:!1},anyOption:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},multipleLimit:{default:2}}},u=c,f=a(1001),m=(0,f.Z)(u,i,l,!1,null,"470a80ef",null),p=m.exports},48599:function(t,e,a){a.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{size:"small",value:t.value,multiple:t.multiple},on:{input:function(e){return t.$emit("input",e)}}},t._l(t.positions,(function(t){return a("el-option",{key:t.name,attrs:{label:t.chs,value:t.name}})})),1)},l=[],n=a(26400),s={name:"SelectArtifactSlot",props:{value:{},multiple:{default:!1}},created(){this.positions=n.m}},r=s,o=a(1001),c=(0,o.Z)(r,i,l,!1,null,"7cc2cd7e",null),u=c.exports},60693:function(t,e,a){a.r(e),a.d(e,{default:function(){return P}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("el-breadcrumb",[a("el-breadcrumb-item",[t._v("圣遗物潜力")])],1),a("el-divider"),a("el-row",[a("el-col",{ref:"content",staticClass:"mona-scroll",style:{height:t.contentHeight},attrs:{span:6}},[a("select-potential-function-name",{model:{value:t.potentialFunctionName,callback:function(e){t.potentialFunctionName=e},expression:"potentialFunctionName"}}),a("div",{staticClass:"pf-detail"},[a("img",{staticClass:"pf-image",attrs:{src:t.pfImage}}),a("div",[a("p",{staticClass:"pf-title"},[t._v(t._s(t.pfChs))]),a("p",{staticClass:"pf-description"},[t._v(t._s(t.pfDescription))])])]),a("div",{staticClass:"pf-config"},[a("item-config",{attrs:{"item-name":t.potentialFunctionName,configs:t.pfConfigConfigs},model:{value:t.potentialFunctionConfig,callback:function(e){t.potentialFunctionConfig=e},expression:"potentialFunctionConfig"}})],1)],1),a("el-col",{staticClass:"col-right mona-scroll",staticStyle:{border:"16px solid transparent"},style:{height:t.contentHeight},attrs:{span:18}},[a("div",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-cpu"},on:{click:t.handleClickStart}},[t._v("开始计算")])],1),a("div",{staticStyle:{display:"flex","align-items":"center",gap:"32px",margin:"16px 0"}},[a("span",{staticClass:"filter-item"},[a("span",{staticClass:"filter-title"},[t._v("位置")]),a("select-artifact-slot",{attrs:{multiple:!0},model:{value:t.filterSlots,callback:function(e){t.filterSlots=e},expression:"filterSlots"}})],1),a("span",{staticClass:"filter-item"},[a("span",{staticClass:"filter-title"},[t._v("套装")]),a("select-artifact-set",{attrs:{multiple:!0,"multiple-limit":5},model:{value:t.filterSetNames,callback:function(e){t.filterSetNames=e},expression:"filterSetNames"}})],1),a("span",{staticClass:"filter-item"},[a("span",{staticClass:"filter-title"},[t._v("主词条")]),a("select-artifact-main-stat",{attrs:{multiple:!0,"include-any":!1},model:{value:t.filterMainStatNames,callback:function(e){t.filterMainStatNames=e},expression:"filterMainStatNames"}})],1)]),a("div",{staticStyle:{margin:"0 0 20px 0"}},[a("el-input-number",{attrs:{size:"small",min:0,max:t.filterLevel[1]},model:{value:t.filterLevel[0],callback:function(e){t.$set(t.filterLevel,0,e)},expression:"filterLevel[0]"}}),t._v(" ~ "),a("el-input-number",{attrs:{size:"small",min:t.filterLevel[0],max:20},model:{value:t.filterLevel[1],callback:function(e){t.$set(t.filterLevel,1,e)},expression:"filterLevel[1]"}})],1),a("div",{staticClass:"artifacts-div"},t._l(t.resultsToBeDisplay,(function(e){return a("artifact-display-by-id",{attrs:{"artifact-id":e[0],extra:e[1].toFixed(2),"show-back":!0,"back-value":e[1]/t.results[0][1]}})})),1),a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{total:t.filteredResults.length,"page-size":20,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)])],1)],1)},l=[],n=a(24026),s={ArtifactEff:{name:"ArtifactEff",chs:"有效词条",description:"以单次强化最大档位为1分",badge:n,config:[{default:!1,name:"atk_use",title:"攻击力有效",type:"bool"},{default:0,max:1,min:0,name:"atk_weight",title:"攻击力权重",type:"float"},{default:!0,name:"atk_p_use",title:"攻击力%有效",type:"bool"},{default:1,max:1,min:0,name:"atk_p_weight",title:"攻击力%权重",type:"float"},{default:!1,name:"hp_use",title:"生命值有效",type:"bool"},{default:0,max:1,min:0,name:"hp_weight",title:"生命值权重",type:"float"},{default:!1,name:"hp_p_use",title:"生命值%有效",type:"bool"},{default:0,max:1,min:0,name:"hp_p_weight",title:"生命值%权重",type:"float"},{default:!1,name:"def_use",title:"防御力有效",type:"bool"},{default:0,max:1,min:0,name:"def_weight",title:"防御力权重",type:"float"},{default:!1,name:"def_p_use",title:"防御力%有效",type:"bool"},{default:0,max:1,min:0,name:"def_p_weight",title:"防御力%权重",type:"float"},{default:!0,name:"critical_use",title:"暴击率有效",type:"bool"},{default:1,max:1,min:0,name:"critical_weight",title:"暴击率权重",type:"float"},{default:!0,name:"critical_damage_use",title:"暴击伤害有效",type:"bool"},{default:1,max:1,min:0,name:"critical_damage_weight",title:"暴击伤害权重",type:"float"},{default:!1,name:"elemental_mastery_use",title:"元素精通有效",type:"bool"},{default:0,max:1,min:0,name:"elemental_mastery_weight",title:"元素精通权重",type:"float"},{default:!1,name:"recharge_use",title:"元素充能效率有效",type:"bool"},{default:0,max:1,min:0,name:"recharge_weight",title:"元素充能效率权重",type:"float"}]}};Object.freeze(s);const r=s;function o(t){const e=r[t];if(!e)return"NoConfig";let a=e.config??[];if(0===a.length)return"NoConfig";let i={};for(let l of a)i[l.name]=l.default;return{[t]:i}}var c=a(67828);function u(t,e,i=12e4){const l=new Worker(new URL(a.p+a.u(933),a.b));return new Promise(((a,n)=>{const s=setTimeout((()=>{n("计算超时")}),i);l.onmessage=i=>{if("ready"===i.data.type)l.postMessage({potentialFunctionInterface:t,artifacts:e});else{const t=i.data.data.results;clearTimeout(s),a(t)}}})).finally((()=>{l.terminate()}))}var f=a(26294),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.value,size:"small"},on:{input:function(e){return t.$emit("input",e)}}},t._l(t.potentialFunctionNames,(function(t){return a("el-option",{key:t.name,attrs:{label:t.chs,value:t.name}})})),1)},p=[];let d=[];for(const z in r){const t=r[z].chs;d.push({name:z,chs:t})}Object.freeze(d);var h={name:"SelectPotentialFunctionName",props:["value"],created(){this.potentialFunctionNames=d}},g=h,v=a(1001),y=(0,v.Z)(g,m,p,!1,null,"4faa5ed6",null),_=y.exports,b=a(48599),C=a(93972),x=a(60630),S=a(77921),N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("artifact-display",t._b({attrs:{item:t.$store.getters["artifacts/artifactsById"][t.artifactId]}},"artifact-display",t.$attrs,!1))},k=[],F=a(24044),$={name:"ArtifactDisplayById",props:["artifactId"],components:{ArtifactDisplay:F.Z}},w=$,A=(0,v.Z)(w,N,k,!1,null,"6a55af9a",null),L=A.exports,B={name:"NewArtifactPotentialPage",components:{ArtifactDisplayById:L,SelectArtifactMainStat:x.Z,SelectArtifactSet:C.Z,SelectArtifactSlot:b.Z,SelectPotentialFunctionName:_,ItemConfig:S.Z},data(){return{potentialFunctionName:"ArtifactEff",potentialFunctionConfig:o("ArtifactEff"),results:[],currentPage:1,contentHeight:"",filterSlots:[],filterSetNames:[],filterMainStatNames:[],filterLevel:[0,20]}},mounted(){const t=this.$refs["content"];this.$nextTick((()=>{const e=t.$el.getBoundingClientRect();this.contentHeight=`calc(100vh - ${e.top}px)`}))},methods:{handleClickStart(){const t=(0,c.Cq)(),e=this.potentialFunctionInterface,a=this.$loading({text:"莫娜占卜中"});u(e,t).then((t=>{this.results=t})).catch((t=>{this.$message.error(t)})).finally((()=>{a.close()}))}},computed:{...(0,f.mapGetters)("artifacts",{artifactsById:"artifactsById"}),potentialFunctionInterface(){return{name:this.potentialFunctionName,config:this.potentialFunctionConfig}},pfImage(){const t=r[this.potentialFunctionName];return t?.badge},pfChs(){const t=r[this.potentialFunctionName];return t?.chs},pfDescription(){const t=r[this.potentialFunctionName];return t?.description},pfConfigConfigs(){const t=r[this.potentialFunctionName];return t?t.config:[]},filteredResults(){let t=[];for(let e of this.results){const a=this.artifactsById[e[0]];if(!a)continue;if(this.filterSlots.length>0&&-1===this.filterSlots.indexOf(a.position))continue;if(this.filterSetNames.length>0&&-1===this.filterSetNames.indexOf(a.setName))continue;if(this.filterMainStatNames.length>0&&-1===this.filterMainStatNames.indexOf(a.mainTag.name))continue;const i=a?.level??20;i<this.filterLevel[0]||i>this.filterLevel[1]||t.push(e)}return t},resultsToBeDisplay(){return this.filteredResults.slice(20*(this.currentPage-1),Math.min(20*this.currentPage,this.filteredResults.length))}},watch:{potentialFunctionName(t,e){if(t===e)return;const a=r[t],i=a.config??[];if(0===i.length)this.potentialFunctionConfig="NoConfig";else{let e={};for(const t of i)e[t.name]=t.default;this.potentialFunctionConfig={[t]:e}}}}},I=B,Z=(0,v.Z)(I,i,l,!1,null,"7fda56a4",null),P=Z.exports}}]);